diff --git a/.idea/compiler.xml b/.idea/compiler.xml
index 7a76678..373650c 100644
--- a/.idea/compiler.xml
+++ b/.idea/compiler.xml
@@ -7,10 +7,10 @@
         <sourceTestOutputDir name="target/generated-test-sources/test-annotations" />
         <outputRelativeToContentRoot value="true" />
         <module name="microbenchmarks" />
-        <module name="STRAC-core" />
         <module name="STRACboard" />
         <module name="STRAC-align" />
         <module name="STRACcore" />
+        <module name="STRAC-core" />
       </profile>
     </annotationProcessing>
     <bytecodeTargetLevel>
diff --git a/STRACAlign/src/main/java/strac/align/align/implementations/SIMDDTW.java b/STRACAlign/src/main/java/strac/align/align/implementations/SIMDDTW.java
index ed40150..4e16ce4 100644
--- a/STRACAlign/src/main/java/strac/align/align/implementations/SIMDDTW.java
+++ b/STRACAlign/src/main/java/strac/align/align/implementations/SIMDDTW.java
@@ -65,6 +65,7 @@ public class SIMDDTW extends Aligner {
         int counter = 0;
 
         for(int i = 1; i < diagCount; i++){
+            //LogProvider.info("INFO", String.format("%s/%s", i, diagCount ));
 
             int[] tmp = d1;
             d1 = d2;
diff --git a/STRACAlign/src/test/java/TestAilgners.java b/STRACAlign/src/test/java/TestAilgners.java
index c073a53..1ac2f42 100644
--- a/STRACAlign/src/test/java/TestAilgners.java
+++ b/STRACAlign/src/test/java/TestAilgners.java
@@ -212,6 +212,8 @@ public class TestAilgners {
         Assert.assertEquals(reference, d2.getDistance(), allowedApprox);
     }
 
+
+
     public String getArray(int[] tr){
         String r = "";
 
diff --git a/STRACcore/src/main/java/strac/core/TraceHelper.java b/STRACcore/src/main/java/strac/core/TraceHelper.java
index f57d490..8dbf7ed 100644
--- a/STRACcore/src/main/java/strac/core/TraceHelper.java
+++ b/STRACcore/src/main/java/strac/core/TraceHelper.java
@@ -57,6 +57,7 @@ public class TraceHelper {
         return bag.get(sentence);
     }
 
+    static Integer MAX = 40000;
 
     public long countSentences(String separator, String[] remove,  InputStream stream, IHasNext hasNextIterator, INextProvider sentenceProvider){
 
@@ -64,7 +65,7 @@ public class TraceHelper {
 
         long count = 0;
 
-        while (hasNextIterator.hasNext(separator, sc)) {
+        while (hasNextIterator.hasNext(separator, sc) && count <= MAX) {
             String line = sentenceProvider.getNext(separator, sc);
 
             for(String pattern: remove)
@@ -116,8 +117,8 @@ public class TraceHelper {
 
         List<String> sentences = new ArrayList<>();
         long index = 0;
-
-        while (hasNextIterator.hasNext(separator, sc)) {
+        long scount = 0;
+        while (hasNextIterator.hasNext(separator, sc) && scount < count) {
             String line = sentenceProvider.getNext(separator, sc);
 
 
@@ -139,7 +140,6 @@ public class TraceHelper {
                 }
             }
 
-
             // System.out.println(line);
             if(keepSentences && !line.equals(""))
                 sentences.add(line);
@@ -147,7 +147,7 @@ public class TraceHelper {
 
             if(!line.equals(""))
                 trace[(int)index++] = updateBag(line);
-
+            scount++;
         }
 
 
diff --git a/logs/tool.log b/logs/tool.log
index 70d2e80..21a4b3f 100644
--- a/logs/tool.log
+++ b/logs/tool.log
@@ -14,3 +14,210 @@
 2020-07-14 10:14:04 INFO  tool - Global bag info: total sentences 173156 different sentences 69229
 2020-07-14 10:14:04 INFO  tool - Processing /Users/javierca/Documents/traces/2/aead_aes256gcm.log
 2020-07-14 10:14:04 INFO  tool - Taking class strac.core.stream_providers.FileInputProvider instance as provider
+2020-07-14 10:14:04 INFO  tool - New trace added size:  173156
+2020-07-14 10:14:04 INFO  tool - Global bag info: total sentences 346312 different sentences 99705
+2020-07-14 10:14:04 INFO  tool - Processing /Users/javierca/Documents/traces/3/aead_aes256gcm.log
+2020-07-14 10:14:04 INFO  tool - Taking class strac.core.stream_providers.FileInputProvider instance as provider
+2020-07-14 10:14:04 INFO  tool - New trace added size:  173156
+2020-07-14 10:14:04 INFO  tool - Global bag info: total sentences 519468 different sentences 130194
+2020-07-14 10:14:04 INFO  tool - Processing /Users/javierca/Documents/traces/4/aead_aes256gcm.log
+2020-07-14 10:14:04 INFO  tool - Taking class strac.core.stream_providers.FileInputProvider instance as provider
+2020-07-14 10:14:04 INFO  tool - New trace added size:  173156
+2020-07-14 10:14:04 INFO  tool - Global bag info: total sentences 692624 different sentences 160679
+2020-07-14 10:14:04 INFO  tool - Processing /Users/javierca/Documents/traces/5/aead_aes256gcm.log
+2020-07-14 10:14:04 INFO  tool - Taking class strac.core.stream_providers.FileInputProvider instance as provider
+2020-07-14 10:14:05 INFO  tool - New trace added size:  173156
+2020-07-14 10:14:05 INFO  tool - Global bag info: total sentences 865780 different sentences 191153
+2020-07-14 10:14:05 INFO  tool - Processing /Users/javierca/Documents/traces/6/aead_aes256gcm.log
+2020-07-14 10:14:05 INFO  tool - Taking class strac.core.stream_providers.FileInputProvider instance as provider
+2020-07-14 10:14:05 INFO  tool - New trace added size:  173156
+2020-07-14 10:14:05 INFO  tool - Global bag info: total sentences 1038936 different sentences 221630
+2020-07-14 10:14:05 INFO  tool - Processing /Users/javierca/Documents/traces/7/aead_aes256gcm.log
+2020-07-14 10:14:05 INFO  tool - Taking class strac.core.stream_providers.FileInputProvider instance as provider
+2020-07-14 10:14:05 INFO  tool - New trace added size:  173156
+2020-07-14 10:14:05 INFO  tool - Global bag info: total sentences 1212092 different sentences 252095
+2020-07-14 10:14:05 INFO  tool - Processing /Users/javierca/Documents/traces/8/aead_aes256gcm.log
+2020-07-14 10:14:05 INFO  tool - Taking class strac.core.stream_providers.FileInputProvider instance as provider
+2020-07-14 10:14:05 INFO  tool - New trace added size:  173156
+2020-07-14 10:14:05 INFO  tool - Global bag info: total sentences 1385248 different sentences 282561
+2020-07-14 10:14:05 INFO  tool - Processing /Users/javierca/Documents/traces/9/aead_aes256gcm.log
+2020-07-14 10:14:05 INFO  tool - Taking class strac.core.stream_providers.FileInputProvider instance as provider
+2020-07-14 10:14:06 INFO  tool - New trace added size:  173156
+2020-07-14 10:14:06 INFO  tool - Global bag info: total sentences 1558404 different sentences 313043
+2020-07-14 10:14:06 INFO  tool - Processing /Users/javierca/Documents/traces/10/aead_aes256gcm.log
+2020-07-14 10:14:06 INFO  tool - Taking class strac.core.stream_providers.FileInputProvider instance as provider
+2020-07-14 10:14:06 INFO  tool - New trace added size:  173156
+2020-07-14 10:14:06 INFO  tool - Global bag info: total sentences 1731560 different sentences 343508
+2020-07-14 10:14:06 INFO  tool - Initializing aligner. Parameter types strac.align.align.event_distance.DInst@788ddc1f 
+2020-07-14 10:14:06 INFO  tool - Constructor types interface strac.align.align.ICellComparer
+2020-07-14 10:14:06 INFO  tool - No specific pairs, two vs two tournament
+2020-07-14 10:14:06 INFO  tool - Going to thread pool for pairwise comparison
+2020-07-14 10:14:06 INFO  tool - Executing...0 4
+2020-07-14 10:14:06 INFO  tool - Executing...0 6
+2020-07-14 10:14:06 INFO  tool - Executing...0 5
+2020-07-14 10:14:06 INFO  tool - Executing...0 2
+2020-07-14 10:14:06 INFO  tool - Executing...0 3
+2020-07-14 10:14:06 INFO  tool - Executing...0 1
+2020-07-14 10:14:06 INFO  tool - Executing...0 7
+2020-07-14 10:14:06 INFO  tool - Executing...0 8
+2020-07-14 10:14:06 INFO  tool - Executing...0 9
+2020-07-14 10:14:06 INFO  tool - Executing...1 2
+2020-07-14 10:20:11 INFO  tool - DTW Distance 136300.0
+2020-07-14 10:20:11 INFO  tool - Writing strac.align result to file
+2020-07-14 10:20:11 INFO  tool - Executing...1 3
+2020-07-14 10:20:12 INFO  tool - DTW Distance 136300.0
+2020-07-14 10:20:12 INFO  tool - Writing strac.align result to file
+2020-07-14 10:20:12 INFO  tool - Executing...1 4
+2020-07-14 10:20:12 INFO  tool - DTW Distance 136300.0
+2020-07-14 10:20:12 INFO  tool - Writing strac.align result to file
+2020-07-14 10:20:12 INFO  tool - Executing...1 5
+2020-07-14 10:20:12 INFO  tool - DTW Distance 136300.0
+2020-07-14 10:20:12 INFO  tool - Writing strac.align result to file
+2020-07-14 10:20:12 INFO  tool - Executing...1 6
+2020-07-14 10:20:12 INFO  tool - DTW Distance 136300.0
+2020-07-14 10:20:12 INFO  tool - Writing strac.align result to file
+2020-07-14 10:20:12 INFO  tool - Executing...1 7
+2020-07-14 10:20:13 INFO  tool - DTW Distance 136297.0
+2020-07-14 10:20:13 INFO  tool - Writing strac.align result to file
+2020-07-14 10:20:13 INFO  tool - Executing...1 8
+2020-07-14 10:20:13 INFO  tool - DTW Distance 136300.0
+2020-07-14 10:20:13 INFO  tool - Writing strac.align result to file
+2020-07-14 10:20:13 INFO  tool - Executing...1 9
+2020-07-14 10:20:17 INFO  tool - DTW Distance 136300.0
+2020-07-14 10:20:17 INFO  tool - Writing strac.align result to file
+2020-07-14 10:20:17 INFO  tool - Executing...2 3
+2020-07-14 10:20:23 INFO  tool - DTW Distance 136361.0
+2020-07-14 10:20:23 INFO  tool - Writing strac.align result to file
+2020-07-14 10:20:23 INFO  tool - Executing...2 4
+2020-07-14 10:20:24 INFO  tool - DTW Distance 136300.0
+2020-07-14 10:20:24 INFO  tool - Writing strac.align result to file
+2020-07-14 10:20:24 INFO  tool - Executing...2 5
+2020-07-14 10:24:46 INFO  tool - DTW Distance 136365.0
+2020-07-14 10:24:46 INFO  tool - Writing strac.align result to file
+2020-07-14 10:24:46 INFO  tool - Executing...2 6
+2020-07-14 10:25:42 INFO  tool - DTW Distance 136365.0
+2020-07-14 10:25:42 INFO  tool - Writing strac.align result to file
+2020-07-14 10:25:42 INFO  tool - Executing...2 7
+2020-07-14 10:25:44 INFO  tool - DTW Distance 136365.0
+2020-07-14 10:25:44 INFO  tool - Writing strac.align result to file
+2020-07-14 10:25:44 INFO  tool - Executing...2 8
+2020-07-14 10:25:44 INFO  tool - DTW Distance 136365.0
+2020-07-14 10:25:44 INFO  tool - Writing strac.align result to file
+2020-07-14 10:25:44 INFO  tool - Executing...2 9
+2020-07-14 10:25:47 INFO  tool - DTW Distance 136364.0
+2020-07-14 10:25:47 INFO  tool - Writing strac.align result to file
+2020-07-14 10:25:47 INFO  tool - Executing...3 4
+2020-07-14 10:25:48 INFO  tool - DTW Distance 136364.0
+2020-07-14 10:25:48 INFO  tool - Writing strac.align result to file
+2020-07-14 10:25:48 INFO  tool - Executing...3 5
+2020-07-14 10:25:50 INFO  tool - DTW Distance 136365.0
+2020-07-14 10:25:50 INFO  tool - Writing strac.align result to file
+2020-07-14 10:25:50 INFO  tool - Executing...3 6
+2020-07-14 10:25:51 INFO  tool - DTW Distance 136365.0
+2020-07-14 10:25:51 INFO  tool - Writing strac.align result to file
+2020-07-14 10:25:51 INFO  tool - Executing...3 7
+2020-07-14 10:25:54 INFO  tool - DTW Distance 136365.0
+2020-07-14 10:25:54 INFO  tool - Writing strac.align result to file
+2020-07-14 10:25:54 INFO  tool - Executing...3 8
+2020-07-14 10:26:00 INFO  tool - DTW Distance 136364.0
+2020-07-14 10:26:00 INFO  tool - Writing strac.align result to file
+2020-07-14 10:26:00 INFO  tool - Executing...3 9
+2020-07-14 10:29:19 INFO  tool - class strac.align.align.implementations.DTW class strac.align.align.event_distance.DInst class strac.align.align.implementations.FastDTW class strac.align.align.implementations.WindowedDTW
+2020-07-14 10:29:19 INFO  tool - Registering aligner... class strac.align.align.implementations.FastDTW
+2020-07-14 10:29:19 INFO  tool - Registering aligner... class strac.align.align.implementations.SIMDDTW
+2020-07-14 10:29:19 INFO  tool - Registering aligner... class strac.align.align.implementations.UnsafeDTW
+2020-07-14 10:29:19 INFO  tool - Registering aligner... class strac.align.align.implementations.DTW
+2020-07-14 10:29:19 INFO  tool - Registering aligner... class strac.align.align.implementations.WindowedDTW
+2020-07-14 10:29:19 INFO  tool - Registering aligner... class strac.align.align.implementations.NoWarpPathDTW
+2020-07-14 10:29:20 INFO  tool - Registering distance... class strac.align.align.event_distance.DInst
+2020-07-14 10:29:20 INFO  tool - Registering distance... class strac.align.align.event_distance.DInst
+2020-07-14 10:29:20 INFO  tool - Parsing traces
+2020-07-14 10:29:20 INFO  tool - Processing /Users/javierca/Documents/traces/1/core1.log
+2020-07-14 10:29:20 INFO  tool - Taking class strac.core.stream_providers.FileInputProvider instance as provider
+2020-07-14 10:29:21 INFO  tool - New trace added size:  273269
+2020-07-14 10:29:21 INFO  tool - Global bag info: total sentences 273269 different sentences 73647
+2020-07-14 10:29:21 INFO  tool - Processing /Users/javierca/Documents/traces/2/core1.log
+2020-07-14 10:29:21 INFO  tool - Taking class strac.core.stream_providers.FileInputProvider instance as provider
+2020-07-14 10:29:22 INFO  tool - New trace added size:  273269
+2020-07-14 10:29:22 INFO  tool - Global bag info: total sentences 546538 different sentences 104129
+2020-07-14 10:29:22 INFO  tool - Processing /Users/javierca/Documents/traces/3/core1.log
+2020-07-14 10:29:22 INFO  tool - Taking class strac.core.stream_providers.FileInputProvider instance as provider
+2020-07-14 10:29:22 INFO  tool - New trace added size:  273269
+2020-07-14 10:29:22 INFO  tool - Global bag info: total sentences 819807 different sentences 134601
+2020-07-14 10:29:22 INFO  tool - Processing /Users/javierca/Documents/traces/4/core1.log
+2020-07-14 10:29:22 INFO  tool - Taking class strac.core.stream_providers.FileInputProvider instance as provider
+2020-07-14 10:29:23 INFO  tool - New trace added size:  273269
+2020-07-14 10:29:23 INFO  tool - Global bag info: total sentences 1093076 different sentences 165074
+2020-07-14 10:29:23 INFO  tool - Processing /Users/javierca/Documents/traces/5/core1.log
+2020-07-14 10:29:23 INFO  tool - Taking class strac.core.stream_providers.FileInputProvider instance as provider
+2020-07-14 10:29:23 INFO  tool - New trace added size:  273269
+2020-07-14 10:29:23 INFO  tool - Global bag info: total sentences 1366345 different sentences 195530
+2020-07-14 10:29:23 INFO  tool - Processing /Users/javierca/Documents/traces/6/core1.log
+2020-07-14 10:29:23 INFO  tool - Taking class strac.core.stream_providers.FileInputProvider instance as provider
+2020-07-14 10:29:24 INFO  tool - New trace added size:  273269
+2020-07-14 10:29:24 INFO  tool - Global bag info: total sentences 1639614 different sentences 225998
+2020-07-14 10:29:24 INFO  tool - Processing /Users/javierca/Documents/traces/7/core1.log
+2020-07-14 10:29:24 INFO  tool - Taking class strac.core.stream_providers.FileInputProvider instance as provider
+2020-07-14 10:29:24 INFO  tool - New trace added size:  273269
+2020-07-14 10:29:24 INFO  tool - Global bag info: total sentences 1912883 different sentences 256457
+2020-07-14 10:29:24 INFO  tool - Processing /Users/javierca/Documents/traces/8/core1.log
+2020-07-14 10:29:24 INFO  tool - Taking class strac.core.stream_providers.FileInputProvider instance as provider
+2020-07-14 10:29:25 INFO  tool - New trace added size:  273269
+2020-07-14 10:29:25 INFO  tool - Global bag info: total sentences 2186152 different sentences 286911
+2020-07-14 10:29:25 INFO  tool - Processing /Users/javierca/Documents/traces/9/core1.log
+2020-07-14 10:29:25 INFO  tool - Taking class strac.core.stream_providers.FileInputProvider instance as provider
+2020-07-14 10:29:25 INFO  tool - New trace added size:  273269
+2020-07-14 10:29:25 INFO  tool - Global bag info: total sentences 2459421 different sentences 317376
+2020-07-14 10:29:25 INFO  tool - Processing /Users/javierca/Documents/traces/10/core1.log
+2020-07-14 10:29:25 INFO  tool - Taking class strac.core.stream_providers.FileInputProvider instance as provider
+2020-07-14 10:29:26 INFO  tool - New trace added size:  273269
+2020-07-14 10:29:26 INFO  tool - Global bag info: total sentences 2732690 different sentences 347824
+2020-07-14 10:29:26 INFO  tool - Initializing aligner. Parameter types strac.align.align.event_distance.DInst@788ddc1f 
+2020-07-14 10:29:26 INFO  tool - Constructor types interface strac.align.align.ICellComparer
+2020-07-14 10:29:26 INFO  tool - No specific pairs, two vs two tournament
+2020-07-14 10:29:26 INFO  tool - Going to thread pool for pairwise comparison
+2020-07-14 10:29:26 INFO  tool - Executing...0 1
+2020-07-14 10:29:26 INFO  tool - Executing...0 6
+2020-07-14 10:29:26 INFO  tool - Executing...0 5
+2020-07-14 10:29:26 INFO  tool - Executing...0 4
+2020-07-14 10:29:26 INFO  tool - Executing...0 3
+2020-07-14 10:29:26 INFO  tool - Executing...0 2
+2020-07-14 10:29:26 INFO  tool - Executing...0 7
+2020-07-14 10:29:26 INFO  tool - Executing...0 8
+2020-07-14 10:29:26 INFO  tool - Executing...0 9
+2020-07-14 10:29:26 INFO  tool - Executing...1 2
+2020-07-14 10:29:26 INFO  tool - Executing...1 3
+2020-07-14 10:29:26 INFO  tool - Executing...1 4
+2020-07-14 10:29:26 INFO  tool - Executing...1 5
+2020-07-14 10:29:26 INFO  tool - Executing...1 6
+2020-07-14 10:29:26 INFO  tool - Executing...1 7
+2020-07-14 10:29:26 INFO  tool - Executing...1 8
+2020-07-14 10:29:26 INFO  tool - Executing...1 9
+2020-07-14 10:29:26 INFO  tool - Executing...2 3
+2020-07-14 10:29:26 INFO  tool - Executing...2 4
+2020-07-14 10:29:26 INFO  tool - Executing...2 5
+2020-07-14 10:29:26 INFO  tool - Executing...2 6
+2020-07-14 10:29:26 INFO  tool - Executing...2 7
+2020-07-14 10:29:26 INFO  tool - Executing...2 8
+2020-07-14 10:29:26 INFO  tool - Executing...2 9
+2020-07-14 10:29:26 INFO  tool - Executing...3 4
+2020-07-14 10:29:26 INFO  tool - Executing...3 5
+2020-07-14 10:29:26 INFO  tool - Executing...3 6
+2020-07-14 10:29:26 INFO  tool - Executing...3 7
+2020-07-14 10:29:26 INFO  tool - Executing...3 8
+2020-07-14 10:29:26 INFO  tool - Executing...3 9
+2020-07-14 10:29:26 INFO  tool - Executing...4 5
+2020-07-14 10:29:26 INFO  tool - Executing...4 6
+2020-07-14 10:29:26 INFO  tool - Executing...4 7
+2020-07-14 10:29:26 INFO  tool - Executing...4 8
+2020-07-14 10:29:26 INFO  tool - Executing...4 9
+2020-07-14 10:29:26 INFO  tool - Executing...5 6
+2020-07-14 10:29:26 INFO  tool - Executing...5 7
+2020-07-14 10:29:26 INFO  tool - Executing...5 8
+2020-07-14 10:29:26 INFO  tool - Executing...5 9
+2020-07-14 10:29:26 INFO  tool - Executing...6 7
+2020-07-14 10:29:26 INFO  tool - Executing...6 8
+2020-07-14 10:29:26 INFO  tool - Executing...6 9
+2020-07-14 10:29:26 INFO  tool - Executing...7 8
+2020-07-14 10:29:26 INFO  tool - Executing...7 9
+2020-07-14 10:29:26 INFO  tool - Executing...8 9
diff --git a/payload1.json b/payload1.json
index e69de29..fe08a10 100644
--- a/payload1.json
+++ b/payload1.json
@@ -0,0 +1,30 @@
+{
+  "files": [
+    "/Users/javierca/Documents/traces/1/core1.log",
+    "/Users/javierca/Documents/traces/2/core1.log",
+    "/Users/javierca/Documents/traces/3/core1.log",
+    "/Users/javierca/Documents/traces/4/core1.log",
+    "/Users/javierca/Documents/traces/5/core1.log",
+    "/Users/javierca/Documents/traces/6/core1.log",
+    "/Users/javierca/Documents/traces/7/core1.log",
+    "/Users/javierca/Documents/traces/8/core1.log",
+    "/Users/javierca/Documents/traces/9/core1.log",
+    "/Users/javierca/Documents/traces/10/core1.log"
+  ],
+  "pairs": [] ,
+  "method": {
+    "name": "SIMD",
+    "params": []
+  },
+  "outputAlignment": true,
+  "exportImage": false,
+  "distanceFunctionName": "dBin",
+  "separator": "[\r\n]",
+  "threadPoolCount": 50,
+  "comparison": {
+    "eq": 0,
+    "diff":5,
+    "gap": 1
+  }
+
+}
\ No newline at end of file
